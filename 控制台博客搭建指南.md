# 🚀 控制台博客搭建指南（macOS）

这是一份完全基于控制台的博客搭建指南，无需在不同界面间切换，一条龙完成所有设置。

## 🎯 一键安装脚本

### 快速开始

1. **打开终端**
   - 按 `Cmd + 空格` 打开 Spotlight
   - 输入 "Terminal" 并回车

2. **下载并运行一键脚本**
```bash
curl -fsSL https://raw.githubusercontent.com/BlackStar1453/blog/template-init-v2/setup-blog-cli.sh | bash
```

或者手动下载：
```bash
wget https://raw.githubusercontent.com/BlackStar1453/blog/template-init-v2/setup-blog-cli.sh
chmod +x setup-blog-cli.sh
./setup-blog-cli.sh
```

### 脚本功能

这个脚本会自动完成：

1. **环境安装**
   - ✅ Homebrew（macOS 包管理器）
   - ✅ Node.js（运行环境）
   - ✅ GitHub CLI（gh）
   - ✅ Cloudflare CLI（wrangler）
   - ✅ Zola（博客生成器）

2. **账户认证**
   - ✅ GitHub 登录认证
   - ✅ Cloudflare 登录认证

3. **仓库设置**
   - ✅ Fork 博客模板
   - ✅ 克隆到本地
   - ✅ 运行初始化脚本

4. **个性化配置**
   - ✅ 配置博客标题、描述
   - ✅ 设置作者信息
   - ✅ 更新配置文件

5. **部署选择**
   - ✅ 本地预览
   - ✅ GitHub Pages 部署
   - ✅ Cloudflare Pages 部署

---

## 📋 手动步骤（如果需要）

### 1. 安装基础工具

```bash
# 安装 Homebrew
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安装 Node.js
brew install node

# 安装 GitHub CLI
brew install gh

# 安装 Cloudflare CLI
npm install -g wrangler

# 安装 Zola
brew install zola
```

### 2. 认证账户

```bash
# GitHub 认证
gh auth login
# 选择 GitHub.com
# 选择 HTTPS
# 选择 Login with a web browser
# 按照提示完成认证

# Cloudflare 认证
wrangler login
# 会打开浏览器完成认证
```

### 3. 设置博客仓库

```bash
# Fork 并克隆仓库
gh repo fork 原作者用户名/blog --clone --remote

# 进入博客目录
cd blog

# 运行初始化脚本
chmod +x init-template-simple.sh
./init-template-simple.sh

# 安装博客依赖
make install
```

### 4. 配置个人信息

```bash
# 编辑配置文件
nano config.toml

# 或使用 vim
vim config.toml
```

修改以下内容：
```toml
base_url = "https://你的GitHub用户名.github.io"
title = "你的博客标题"
description = "你的博客描述"

[extra]
author = "你的姓名"
email = "你的邮箱"
```

### 5. 本地预览

```bash
# 启动本地服务器
make serve

# 或直接使用 zola
zola serve
```

访问 `http://localhost:1111` 查看博客

### 6. 部署到 GitHub Pages

```bash
# 提交更改
git add .
git commit -m "初始化博客"
git push origin main

# 启用 GitHub Pages（通过 API）
gh api repos/:owner/:repo/pages \
  --method POST \
  --field source.branch=main \
  --field source.path=/
```

### 7. 部署到 Cloudflare Pages

```bash
# 构建博客
make build

# 创建 Cloudflare Pages 项目
wrangler pages project create my-blog

# 部署
wrangler pages deploy public --project-name=my-blog
```

---

## 🔧 日常使用命令

### 创建新文章

```bash
# 创建新文章文件
touch content/blog/my-new-post.md

# 编辑文章
nano content/blog/my-new-post.md
```

文章模板：
```markdown
+++
title = "我的新文章"
date = "2024-01-01T00:00:00Z"
description = "文章描述"
[taxonomies]
tags = ["标签1", "标签2"]
categories = ["分类"]
+++

# 文章标题

文章内容...
```

### 发布文章

```bash
# 本地预览
make serve

# 提交并推送
git add .
git commit -m "添加新文章"
git push origin main

# 重新部署到 Cloudflare（如果使用）
make build
wrangler pages deploy public --project-name=my-blog
```

### 同步 Apple 备忘录（可选）

```bash
# 安装同步脚本依赖
./scripts/setup-dependencies.sh

# 设置自动同步
./scripts/blog-helper.sh auto-sync install

# 手动同步一次
./scripts/blog-helper.sh sync-thoughts
```

---

## 🛠️ 常用命令速查

| 功能 | 命令 |
|------|------|
| 本地预览 | `make serve` |
| 构建博客 | `make build` |
| 查看状态 | `git status` |
| 提交更改 | `git add . && git commit -m "消息"` |
| 推送到远程 | `git push origin main` |
| 拉取最新 | `git pull origin main` |
| 查看分支 | `git branch -a` |
| GitHub 状态 | `gh repo view` |
| CF 项目列表 | `wrangler pages project list` |

---

## ❓ 故障排除

### 权限问题
```bash
chmod +x *.sh
chmod +x scripts/*.sh
```

### 重新认证
```bash
gh auth logout
gh auth login

wrangler logout
wrangler login
```

### 重置仓库
```bash
# 删除本地仓库
rm -rf blog

# 重新克隆
gh repo fork 原作者/blog --clone --remote
```

### 查看日志
```bash
# GitHub Actions 日志
gh run list
gh run view [run-id]

# Cloudflare 部署日志
wrangler pages deployment list --project-name=my-blog
```

---

## 🎉 完成！

使用这个控制台流程，你可以：

- ✅ 完全在终端中完成所有操作
- ✅ 无需在不同界面间切换
- ✅ 自动化大部分配置过程
- ✅ 快速部署到多个平台
- ✅ 轻松管理日常更新

开始你的博客写作之旅吧！ 🚀
