# macOS备忘录标签添加步骤图解

## 🎯 目标

学会在macOS备忘录中正确添加系统标签，以便同步脚本能够识别和处理。

## ⚠️ 关键区别

### ❌ 错误方式（不会被识别）

```
这是我的想法 #thought #cmx
```

这只是**普通文本**，看起来像这样：
- 文字是黑色的
- 不可点击
- 不会被系统识别为标签

### ✅ 正确方式（会被识别）

```
这是我的想法 #thought #cmx
```

这是**系统标签**，看起来像这样：
- 文字是**蓝色**的
- **可以点击**
- 点击后会显示所有使用该标签的备忘录
- 会被系统识别和提取

## 📝 详细步骤

### 步骤1：打开备忘录应用

1. 在Dock或启动台中找到"备忘录"应用
2. 或使用Spotlight搜索（⌘ + Space，输入"备忘录"）

### 步骤2：创建新备忘录

1. 点击右上角的"新建备忘录"按钮（或按 ⌘ + N）
2. 输入你的内容

### 步骤3：添加第一个标签

1. **在备忘录中输入 `#` 符号**
   ```
   这是我的想法
   
   #
   ```

2. **系统会自动弹出标签建议列表**
   - 如果之前创建过标签，会显示在列表中
   - 可以从列表中选择
   - 或继续输入新标签名称

3. **输入标签名称**
   ```
   这是我的想法
   
   #thought
   ```

4. **按回车键（Enter）确认**
   - 标签会变成**蓝色**
   - 标签变成**可点击**的

### 步骤4：添加更多标签

1. **在标签后面输入空格**
2. **再次输入 `#` 符号**
3. **输入第二个标签名称**
   ```
   这是我的想法
   
   #thought #cmx
   ```
4. **按回车键确认**

### 步骤5：验证标签已正确添加

检查以下几点：

✅ **标签是蓝色的**
- 如果是黑色，说明没有正确添加

✅ **标签可以点击**
- 点击标签应该显示所有使用该标签的备忘录

✅ **标签在标签浏览器中可见**
- 打开标签浏览器（视图 → 显示标签浏览器）
- 应该能看到你添加的标签

## 🔍 验证方法

### 方法1：视觉检查

**正确的标签**：
```
#thought #cmx
```
- 蓝色文字
- 可点击
- 有下划线或特殊样式

**错误的标签**：
```
#thought #cmx
```
- 黑色文字
- 不可点击
- 看起来像普通文本

### 方法2：使用标签浏览器

1. 打开备忘录应用
2. 点击菜单：**视图 → 显示标签浏览器**
3. 在左侧边栏应该能看到你的标签
4. 点击标签，应该显示使用该标签的备忘录

### 方法3：使用同步脚本验证

运行以下命令：

```bash
./sync-notes.sh --list
```

**成功输出示例**：
```
🔗 连接到备忘录应用...
✅ 连接成功

📋 带标签的备忘录列表:

1. 这是我的想法
   标签: #thought, #cmx
   修改时间: 2025-10-01 04:30:00
```

**失败输出示例**：
```
❌ 没有找到带标签的备忘录
```

如果看到失败输出，说明标签没有正确添加。

## 🎨 标签样式说明

### macOS Big Sur 及更高版本

- **系统标签**：蓝色、可点击、有特殊样式
- **普通文本**：黑色、不可点击

### 如何区分

1. **颜色**：系统标签是蓝色的
2. **交互**：系统标签可以点击
3. **功能**：点击系统标签会显示相关备忘录

## 📱 iOS/iPadOS 上的标签

在iPhone或iPad上添加标签的方法相同：

1. 在备忘录中输入 `#`
2. 系统会显示标签建议
3. 选择或创建标签
4. 标签会显示为蓝色可点击文本

## 🔧 常见问题

### Q1: 我输入了 `#` 但没有弹出标签建议

**A**: 
- 确保macOS版本为Big Sur (11.0)或更高
- 更新备忘录应用到最新版本
- 重启备忘录应用

### Q2: 标签是黑色的，不是蓝色的

**A**: 
- 这说明没有正确添加为系统标签
- 删除文本，重新输入 `#` 并选择标签
- 确保按回车键确认

### Q3: 我添加了标签，但脚本还是找不到

**A**: 
1. 检查标签是否为蓝色可点击文本
2. 手动运行Apple Cloud Notes Parser：
   ```bash
   cd apple_cloud_notes_parser
   export PATH="/opt/homebrew/opt/ruby/bin:$PATH"
   ruby notes_cloud_ripper.rb --mac ~/Library/Group\ Containers/group.com.apple.notes --one-output-folder
   cd ..
   ```
3. 验证提取结果：
   ```bash
   cat apple_cloud_notes_parser/output/notes_rip/json/all_notes_1.json | python3 -c "
   import json, sys
   data = json.load(sys.stdin)
   notes = data.get('notes', {})
   for key, note in notes.items():
       if note.get('hashtags'):
           print(f\"Found: {note.get('title', '')[:50]}\")
           print(f\"Tags: {note['hashtags']}\")
   "
   ```

### Q4: 可以使用中文标签吗？

**A**: 
- 可以！系统支持中文标签
- 例如：`#日记`、`#读书`、`#技术`

### Q5: 一个备忘录可以有多个标签吗？

**A**: 
- 可以！添加多个标签只需重复添加过程
- 例如：`#thought #技术 #cmx`

## 📋 完整示例

### 示例1：创建一个想法并发布到Mastodon

**步骤**：

1. 打开备忘录应用
2. 创建新备忘录
3. 输入内容：
   ```
   今天学到了一个新的Python技巧，使用装饰器可以大大简化代码！
   ```
4. 添加标签：
   - 输入 `#`
   - 输入 `thought`
   - 按回车
   - 输入空格
   - 输入 `#`
   - 输入 `cmx`
   - 按回车
5. 最终效果：
   ```
   今天学到了一个新的Python技巧，使用装饰器可以大大简化代码！
   
   #thought #cmx
   ```
   （`#thought` 和 `#cmx` 应该是蓝色可点击的）

6. 运行同步：
   ```bash
   ./sync-notes.sh
   ```

### 示例2：创建读书笔记（不发布到Mastodon）

**步骤**：

1. 创建新备忘录
2. 输入内容：
   ```
   《挪威的森林》读后感
   
   这本书讲述了...
   ```
3. 添加标签：
   - 输入 `#`
   - 输入 `读书`
   - 按回车
4. 最终效果：
   ```
   《挪威的森林》读后感
   
   这本书讲述了...
   
   #读书
   ```
   （注意：没有 `#cmx`，所以不会发布到Mastodon）

5. 运行同步：
   ```bash
   ./sync-notes.sh
   ```

## 🎯 成功标志

当你正确添加标签后：

1. ✅ 标签显示为**蓝色**
2. ✅ 标签**可以点击**
3. ✅ 在标签浏览器中**可见**
4. ✅ 运行 `./sync-notes.sh --list` 能**找到备忘录**
5. ✅ 同步脚本能**成功处理**

## 📚 相关文档

- [README-备忘录同步.md](./README-备忘录同步.md) - 快速入门
- [如何在备忘录中添加标签.md](./如何在备忘录中添加标签.md) - 详细说明
- [备忘录同步到博客和Mastodon流程指南.md](./备忘录同步到博客和Mastodon流程指南.md) - 完整流程

---

*最后更新：2025-10-01*
